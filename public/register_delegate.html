<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Metadata and viewport for responsive design -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SMUN - Registration</title>
  <!-- External stylesheet and JS for page styling and interactivity -->
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
  <link rel="icon" type="image/png" href="favicon.png" />
  <!-- Google tag for analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VCB5QTGWRH"></script>
  <script>
    // Google Analytics tracking setup
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VCB5QTGWRH');
  </script>
  <style>
    /* Add your page styling here */
    body {
      font-family: 'Work Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 20px;
    }
    /* ... (rest of your existing styles) ... */
    /* Keep your existing styles as provided */
  </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar">
  <div class="logo"><a href="index.html"><span class="highlight">S</span>MUN</a></div>
  <div class="hamburger" id="hamburger">☰</div>
  <ul class="nav-links" id="nav-links">
    <li><a href="index.html">HOME</a></li>
    <li><a href="register.html" class="active">REGISTER</a></li>
    <li><a href="secretariat.html">SECRETARIAT</a></li>
    <li><a href="committees.html">COMMITTEES</a></li>
    <li><a href="resources.html">RESOURCES</a></li>
    <li><a href="contact.html">CONTACT US</a></li>
  </ul>
</nav>

<!-- Main registration page content -->
<div class="page-content">
  <h1>Registration for SMUN 2025</h1>

  <!-- Registration form starts -->
  <form id="registerForm" enctype="multipart/form-data">
    <!-- Basic Information Section -->
    <div class="hover-box">
      <h3>Basic Information</h3>
      <label for="name">Name</label>
      <input type="text" id="name" name="name" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" required />

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" required />

      <label for="experience">MUN Experience</label>
      <textarea id="experience" name="experience" placeholder="Describe your MUN experience" rows="3"></textarea>

      <label for="institution">Institution Name</label>
      <input type="text" id="institution" name="institution" required />
    </div>

    <!-- Meal Preference Selection -->
    <div class="hover-box">
      <h3>Meal Preference</h3>
      <select name="mealPreference" id="mealPreference" required>
        <option value="">Select</option>
        <option value="veg">Vegetarian</option>
        <option value="nonveg">Non-Vegetarian</option>
      </select>
    </div>

    <!-- Committee Preferences -->
    <div class="hover-box">
      <h3>Committee Preference 1</h3>
      <label for="committeePreference1">Committee</label>
      <input type="text" id="committeePreference1" name="committeePreference1" />

      <label for="alloPreference1">Allo Preference (Give 3, separated by commas)</label>
      <input type="text" id="alloPreference1" name="alloPreference1" />
    </div>
    <div class="hover-box">
      <h3>Committee Preference 2</h3>
      <label for="committeePreference2">Committee</label>
      <input type="text" id="committeePreference2" name="committeePreference2" />

      <label for="alloPreference2">Allo Preference (Give 3, separated by commas)</label>
      <input type="text" id="alloPreference2" name="alloPreference2" />

      <p>If either of your preferences is IPC, kindly check the appropriate box:</p>
      <div class="checkbox-group">
        <input type="checkbox" id="photography" name="photography" value="true" />
        <label for="photography">Photography</label>
        <input type="checkbox" id="journalism" name="journalism" value="true" />
        <label for="journalism">Journalism</label>
      </div>
    </div>

    <!-- Awards Section -->
    <div class="hover-box">
      <h3>Awards in MUN</h3>
      <textarea id="awards" name="awards" placeholder="List your awards" rows="3"></textarea>
    </div>

    <!-- Double Delegation Details -->
    <div class="hover-box">
      <h3>If UNGA DISEC (DOUBLE DELEGATION), fill the delegate details:</h3>
      <label for="doubleName">Name</label>
      <input type="text" id="doubleName" name="doubleName" />

      <label for="doublePhone">Phone Number</label>
      <input type="tel" id="doublePhone" name="doublePhone" />

      <label for="doubleEmail">Email Id</label>
      <input type="email" id="doubleEmail" name="doubleEmail" />

      <label for="doubleMealPreference">Meal Preference</label>
      <select name="doubleMealPreference" id="doubleMealPreference">
        <option value="">Select</option>
        <option value="veg">Vegetarian</option>
        <option value="nonveg">Non-Vegetarian</option>
      </select>

      <label for="doubleExperience">MUN Experience</label>
      <textarea id="doubleExperience" name="doubleExperience" rows="3"></textarea>

      <label for="doubleAwards">Awards</label>
      <textarea id="doubleAwards" name="doubleAwards" rows="3"></textarea>

      <label for="doubleInstitution">Institution Name</label>
      <input type="text" id="doubleInstitution" name="doubleInstitution" />
    </div>

    <!-- Payment Section -->
    <div class="hover-box">
      <h3>Payment Information</h3>
      <!-- QR Code for payment -->
      <img src="qr code.png" alt="Payment QR Code" class="qr-code" />

      <label for="transactionScreenshot">Attach Screenshot Of The Payment</label>
      <input type="file" id="transactionScreenshot" name="transactionScreenshot" accept="image/*" class="file-input" />

      <label for="transactionId">Enter the Transaction Id</label>
      <input type="text" id="transactionId" name="transactionId" />

      <label for="referenceCode">Kindly insert Reference code if any (For Delegation)</label>
      <input type="text" id="referenceCode" name="referenceCode" />
    </div>

    <div id="registerSuccess" style="display:none; background:#d4edda; padding:12px; border-radius:5px; margin:10px 0; color: #111; text-align:center;"></div>

    <button type="submit" class="register-now-btn">Register</button>
  </form>

  <!-- Glowing registration info at page end -->
  <div class="registration-details-box hover-glow">
    <div class="registration-details-content">
      <h2>Registration Details</h2>
      <p><strong>Registration Fee:</strong> ₹1300</p>
      <p><strong>Deadline:</strong> 15th October 2025</p>
      <p><strong>Venue:</strong> Indian Council for Cultural Relations, Kolkata (ICCR)</p>
    </div>
  </div>
</div>

<!-- JavaScript for form submission with fetch to Supabase backend -->
<script>
  document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    try {
      const response = await fetch('/register', {
        method: 'POST',
        body: formData
      });

      if (response.ok) {
        document.getElementById('registerSuccess').style.display = 'block';
        document.getElementById('registerSuccess').innerText = '✔️ Registration successful! Welcome to SMUN 2025!';
        form.reset();
      } else {
        document.getElementById('registerSuccess').style.display = 'block';
        document.getElementById('registerSuccess').innerText = '❌ Registration failed. Please try again.';
      }
    } catch (error) {
      document.getElementById('registerSuccess').style.display = 'block';
      document.getElementById('registerSuccess').innerText = '⚠️ Error connecting to server.';
      console.error(error);
    }
  });
</script>
</body>
</html>
